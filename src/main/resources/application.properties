# ============================================================================
# CONFIGURAÇÃO DA APLICAÇÃO
# ============================================================================
spring.application.name=ecommerce

# ============================================================================
# CONFIGURAÇÃO DO BANCO DE DADOS H2 (EM MEMÓRIA)
# ============================================================================
# URL de conexão com o banco H2 em memória
# O banco é criado automaticamente e apagado quando a aplicação é encerrada
spring.datasource.url=jdbc:h2:mem:ecommerce-db
spring.datasource.driver-class-name=org.h2.Driver
spring.datasource.username=sa
spring.datasource.password=
spring.jpa.database-platform=org.hibernate.dialect.H2Dialect

# ============================================================================
# CONFIGURAÇÃO DO JPA/HIBERNATE
# ============================================================================
# create-drop: cria as tabelas automaticamente ao iniciar e apaga ao encerrar
# ⚠️ ATENÇÃO: Use apenas em desenvolvimento! Em produção, use 'validate' ou 'none'
spring.jpa.hibernate.ddl-auto=create-drop

# Sempre executa scripts SQL de inicialização (data.sql, schema.sql)
spring.sql.init.mode=always

# Aguarda o banco estar pronto antes de executar scripts de inicialização
# Permite que o Hibernate crie as tabelas antes de executar o data.sql
spring.jpa.defer-datasource-initialization=true

# ============================================================================
# CONSOLE WEB DO H2 (APENAS PARA DESENVOLVIMENTO)
# ============================================================================
# Habilita o console web do H2 para visualizar e gerenciar o banco de dados
# Acesse em: http://localhost:8080/h2-console
spring.h2.console.enabled=true
spring.h2.console.path=/h2-console

# ============================================================================
# LOGS DE SQL (APENAS PARA DESENVOLVIMENTO)
# ============================================================================
# Exibe no console todas as queries SQL geradas pelo Hibernate
spring.jpa.show-sql=true

# Formata os SQLs para facilitar a leitura
spring.jpa.properties.hibernate.format_sql=true

# Nível DEBUG: mostra todas as instruções SQL executadas
logging.level.org.hibernate.SQL=DEBUG

# Nível TRACE: mostra os valores dos parâmetros vinculados às queries
# Exemplo: WHERE id = ? → WHERE id = 123
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE