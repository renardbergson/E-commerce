<!DOCTYPE html>
<html lang="pt-BR" xmlns:th="http://www.thymeleaf.org">
<body>

<header th:fragment="header" class="header">
    <nav class="nav-container">
        <div class="logo">
            <a th:href="@{/}" style="text-decoration: none; color: inherit;">
                <h1>
                    <i class="fas fa-shopping-bag"></i> E-commerce
                </h1>
            </a>
        </div>
        <ul class="nav-menu">
            <li>
                <a th:href="@{/cart/close}">Home</a>
            </li>
            <li>
                <a href="#produtos">Produtos</a>
            </li>
            <li>
                <a th:text="${session.loggedUser != null && session.loggedUser.role.name() == 'ADMIN' ? 'Gerenciar Pedidos' : 'Pedidos'}" th:href="@{/order}">Pedidos</a>
            </li>
        </ul>
        <div class="user-actions">
            <a th:href="@{/cart/open}" class="cart-btn" id="cart-btn" title="Carrinho de compras">
                <i class="fas fa-shopping-cart"></i>
                <span th:text="${session.shoppingCart != null ? session.shoppingCart.totalQuantity : '0'}" class="cart-count" id="cart-count"></span>
            </a>
            <div class="dropdown">
                <button class="btn btn-outline dropdown-toggle" id="profile-dropdown">
                    <i class="fas fa-user"></i>
                    <span th:text="${session.loggedUser != null ? session.loggedUser.firstName : 'Usuário'}"></span>
                    <i class="fas fa-chevron-down"></i>
                </button>
                <div class="dropdown-menu" id="dropdown-menu">
                    <a th:if="${session.loggedUser == null}" th:href="@{/signin}" class="dropdown-item">
                        <i class="fas fa-sign-in-alt"></i> Fazer Login
                    </a>
                    <a th:if="${session.loggedUser == null}" th:href="@{/signup}" class="dropdown-item">
                        <i class="fas fa-user-plus"></i> Criar Conta
                    </a>
                    <a th:if="${session.loggedUser != null && session.loggedUser.role.name() == 'ADMIN'}" th:href="@{/admin}" class="dropdown-item">
                        <i class="fas fa-cogs"></i> Área Administrativa
                    </a>
                    <a th:href="@{/logout}" class="dropdown-item">
                        <i class="fas fa-sign-out-alt"></i> Logout
                    </a>
                </div>
            </div>
        </div>
    </nav>
</header>

</body>
</html>